<!DOCTYPE html>
<html>
	<head>
		<title>signup</title>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
		<script src="https://github.com/hasura/js-sdk/releases/download/v0.1.2/hasura.min.js"></script>
        <script>
            hasura.setBaseDomain('c100.hasura.me');
            hasura.disableHttps(); // No HTTPS enabled on local-development
        </script>
	</head>
	<body style="color:White;">
		<br><br><br><br><br><br><br><br>
		 <div class="login-page">

	  		<div class="form">

 	   			<form class="register-form" name="register-form" id="signup_form">
				<center><table>
				<tr>
					<td>	 
						<input type="text" name="username" value="" placeholder="Username" size="30" autofocus id="s_uname">
					</td>
				</tr><br>
				<tr>
					<td>	 
						<input type="text" name="email" value="" placeholder="Email" size="30" id="s_email">
					</td>
				</tr><br>
				<tr>
					<td>    
						<input type="password" name="password" value="" placeholder="Password" size="30" id="s_pass">
					</td>
				</tr><br>
				<tr>
					<td>	 
						<input type="numeric" name="mobile" value="" placeholder="Mobile" size="30" id="s_mobile">
					</td>
				</tr><br>
				<tr>
					<td>
						<center><input type="submit" value="Sign Up" id="signup_btn"></center>
					</td>
				</tr><br>
				<tr>
					<td>
						<center><span><em>Back to <a href="/"><u>login</u> </em><span></center>
					</td>
				</tr><br>
				</table></center>
			</form>
		</div>
		</div>
		
    <script type="text/javascript">
        var auth_url = "http://auth.c100.hasura.me";
        //var data_url = "http://data.c100.hasura.me";

        var signup_form = document.getElementById('signup_form');
        var signup_btn = document.getElementById('signup_btn');

        var signup_process = function(e){
            e.preventDefault();
            var s_uname = document.getElementById('s_uname');
            var s_email = document.getElementById('s_email');
            var s_pass = document.getElementById('s_pass');
            var s_mobile = document.getElementById('s_mobile');
            
            console.log('Initiated Signup!'); 
                    
            hasura.setUsername(s_uname.value);
            
            
            hasura.auth.signup(
                s_pass.value, 
                (sdata) => {
                    console.log('Login successfull: ' + sdata);
                    window.location = "/app";
                },
                (edata) => {
                    console.log('Error occured :' + edata)
                }                       
            );
        }
        signup_form.addEventListener('submit', signup_process);
        signup_btn.addEventListener('click', signup_process);
        
        
    </script>
	</body>
</html>
